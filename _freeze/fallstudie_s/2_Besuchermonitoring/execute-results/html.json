{
  "hash": "34d2f02a302cdde90e082a59f062bda5",
  "result": {
    "engine": "knitr",
    "markdown": "---\nlesson: Besuchermonitoring\nthema: Felderhebungen Grüental\nexecute: \n  echo: true   # set to true to show musterlösung\n  output: false\ncode-fold: true  # set false to show all code\ncode-summary: \"Musterlösung\"\nknitr:\n  opts_chunk: \n    collapse: true\n---\n\n\n# Monitoring\n\n\n## Einführung\n\nEs gibt eine Vielzahl an möglichen Methoden zur Erfassung der Besuchszahlen. Automatische Zählgeräte bieten die Möglichkeit, lange und durchgehende Zeitreihen zu erfassen. Inputs dazu, wie diese ausgewertet werden können, erhält ihr in dieser Aufgabe.\n\n![](images/gruental.jpg){width=50%}\n\n\n## Ziele\n\n1. Ihr könnt das eingesetzte Zählgerät installieren und kennt die Vor- und Nachteile verschiedener Methoden.\n\n2. Ihr könnt die generierten Daten explorativ und deskriptiv auswerten.\n\n\n## Grundlagen\n\nDie Geräte werden gemeinsam auf dem Campus Grüntal platziert. \n\nDatenschutz ist ein wichtiges Thema. Die eingesetzten Geräte erfassen keine Personendaten, sondern nur Bewegungen. Es handelt sich um Pyroelektrische Infrarotsensoren, welche auf den Temperaturunterschied reagieren, wenn sich eine Person vor der Linse bewegt. Insofern handelt es sich, vereinfacht gesagt, um Bewegungsmelder.\n\n\n# Auswertung\n\n__Bearbeitung NACH den Felderhebungen__\n\n\n\n\n### Aufgabe 1: Vorarbeiten\n\nOftmals möchte man direkt mit den Auswertungen in R beginnen, weiss aber selbst noch nicht genau, was eigentlich dargestellt werden soll. Darum macht es Sinn, einen Schritt zurückzutreten und sich zuerst konzeptionell zu überlegen, was mit den Daten eigentlich dargestellt werden soll.\n\n- Überlegt euch mögliche Darstellungsformen für __1. die Anzahl Passagen pro Richtung und Standort__, __2. den Verlauf der Zählungen pro Tag über die gesamte Untersuchungsdauer__ und __3. die Unterschiede Werktag und Wochenende__ am untersuchten Standort.\n\n- __Skizziert eure Ideen__ mittels Stift und Papier (oder digital) in Kleingruppen.\n\n- Individuelle Besprechung der Ideen und anschliessende Umsetzung in R.\n \n\n### Aufgabe 2: Darstellung in R\n\nR bietet sehr viele Optionen zur Analyse und zur Darstellung der Daten. Nehmt bitte den bereitgestellten Datensatz zur Hand und visualisiert eure Ideen mit R. \n\nUntenstehend sind einige Ideen zur Umsetzung:\n\n#### Daten einlesen und Vorbereiten\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## benötigte Bibliothek laden\n\n# zuerst muss diese installiert sein. folgende Zeile müsst ihr nur das erste Mal ausführen\n\n# install.packages(\"readr\")\n\n# WENN installiert, DANN laden\nlibrary(\"readr\") # zum Einlesen von .csv-Dateien mit read_delim\n\n\n## Datensatz einlesen\n\n# dabei speichere ich ihn gleich als Variable ab.\noutdoor <- read_delim(\"datasets/fallstudie_s/Felderhebungen/outdoor.csv\")\n\n## Datum und Uhrzeit\n\n# das Datum und die Uhrzeit sind in einer Spaltegespeichert. \n# R liest das als \"Buchstaben\" ein. Wir definieren es als Datum mit as.POSIXct aus base R\n# dies ist eine mächtige Funktion, welche auch im späteren Verlauf der Fallstudie noch\n# eine wichtige Rolle spielen wird. \n# Damit sie funktioniert, ist es wichtig, dass das Format so eingegeben wird, \n# wie es im .csv ersichtlich ist.\n\noutdoor$DatumUhrzeit <- as.POSIXct(outdoor$DatumUhrzeit, format = \"%d.%m.%Y %H:%M\")\n# d = Tag\n# m = Monat\n# Y = Jahr\n# H = Stunde\n# M = Minute\n\n\n# prüfen des Aufaus Datensaz\nstr(outdoor)\n\n# hat es im Datensatz noch fehlende Werte?\nsum(is.na(outdoor)) # Falls \"0\", dann gibt es keine NA's im Datendatz\n\n# falls es noch NA hat, dann müssen diese entfernt werden\noutdoor <- na.omit(outdoor)\n```\n:::\n\n\n\n#### 1. Anzahl Passagen pro Richtung und Standort\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Berechnen der Anzahl Passagen, pro Richtung\n\nsum(outdoor$IN)\n\n# Wiederholung von diesem Befehl für die weiteren Standorte / Richtungen\n\n## Berechnung der Anzahl Passagen pro Standort insgesamt\n# in der Funktion sum können weitere Operationen ausgeführt werden\nsum(outdoor$IN + outdoor$OUT)\n```\n:::\n\n\n\n#### 2. Verlauf der Zählungen pro Tag über die gesamte Untersuchungsdauer\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Berechnung der Anzahl Passagen / Tag\n\n# mit Base R\noutdoor_d <- aggregate(IN + OUT ~ DatumUhrzeit, data = outdoor, sum)\nnames(outdoor_d)[2] <- \"Passagen_pro_Tag\"\n\n# oder dann mit der library dplyr aus dem tidyverse universe\n# --> das Ergebnis ist dasselbe, der Weg unterscheidet sich. Ich zeige beide Methoden, da wir später \n# sehr viel mit tidyverse arbeiten werden. Die Inputs dazu am morgen folgen aber erst später.\nlibrary(\"dplyr\")\noutdoor_d <- outdoor %>%\n  group_by(DatumUhrzeit) %>%\n  summarise(Passagen_pro_Tag = sum(IN + OUT))\n\n\n## Grafische Darstellung des Verlaufs\n\n# Ich verwende hier eine Funktion, in welcher alle Befehle zusammen durchgeführt werden. \n# So stelle ich sicher, dass die zweite Linie dem ersten, vor mir spezifizierten Plot hinzugefügt wird.\nplot_passages <- function() {\n  \n  # zeige zuerst outdoor, Punkte und Linien\n  plot(outdoor_d$DatumUhrzeit, outdoor_d$Passagen_pro_Tag, \n       type = \"b\", \n       pch = 19, \n       col = \"firebrick3\", \n       xlab = \"Datum\", \n       ylab = \"Anzahl Passagen pro Tag\")\n\n  # und eine Legende\n  legend(\"topright\", legend=c(\"Outdoor\"),\n         col=c(\"firebrick3\"), lty = 1:2, cex=0.8)\n}\n\n# führe die funktion aus\nplot_passages()\n```\n\n::: {.cell-output-display}\n![](2_Besuchermonitoring_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n#### 3. Unterschiede Werktag und Wochenende\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Hinzufügen des Wochentags aufgrund Datum\n\noutdoor_d$weekday_status <- weekdays(outdoor_d$DatumUhrzeit) %in% c(\"Samstag\", \"Sonntag\")\n\n\n## Kuchendiagramm der Anzahl Passagen für Werktag und Wochenende\n\n# erstelle zuerst die einzelnen \"Stücke\", welche in Diagramm dargestellt werden sollen\nslieces <- c(sum(outdoor_d$Passagen_pro_Tag[outdoor_d$weekday_status==\"TRUE\"]),\n             sum(outdoor_d$Passagen_pro_Tag[outdoor_d$weekday_status==\"FALSE\"]))\n# definiere die lables\nlbls <- c(\"Wochenende\", \"Werktag\")\n\n# erstelle den Plot\npie(slieces, \n    labels = lbls, \n    main = \"outdoor\",\n    col = c(\"firebrick3\", \"lightblue\"))\n```\n\n::: {.cell-output-display}\n![](2_Besuchermonitoring_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n__--> Erklärt dem Plenum nächste Woche was ihr gemacht habt, was eure Daten zeigen und präsentiert eure Daratellungen. __\n",
    "supporting": [
      "2_Besuchermonitoring_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}