{
  "hash": "f75d38c519fe9bbc10c2dad74d19a2dd",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexecute:\n  echo: true   # set to true to show musterlösung\n  output: true # set to true to show musterlösung\ncode-fold: true\ncode-summary: \"Musterlösung\"\nknitr:\n  opts_chunk: \n    collapse: true\n---\n\n\n# Multivariate Modelle \n\nEinstieg Multivariate Modelle / Habitatselektionsmodell\n\n## Libraries laden\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nlibrary(\"sf\")\nlibrary(\"terra\")\nlibrary(\"dplyr\")\nlibrary(\"readr\")\nlibrary(\"ggplot2\")\nlibrary(\"PerformanceAnalytics\")\nlibrary(\"pastecs\")\nlibrary(\"car\")\nlibrary(\"psych\")\n\noptions(scipen = 999)\n```\n:::\n\n\n## Aufgabe 1\n\nEinlesen des Gesamtdatensatzes für die Multivariate Analyse von Moodle\n\n1) Sichtung des Datensatzes, der Variablen und der Datentypen\n2) Kontrolle wieviele Rehe in diesem Datensatz enthalten sind\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDF_mod <- read_delim(\"datasets/fallstudie_n/Aufgabe4_Datensatz_Habitatnutzung_Modelle_241028.csv\", delim = \";\")\n\nstr(DF_mod)\n\nclass(DF_mod$time_of_day)\n\ntable(DF_mod$id)\n\nDF_mod |>\n  group_by(id) |>\n  summarize(anzahl = n())\n\nlength(unique(DF_mod$id))\n```\n:::\n\n\n## Aufgabe 2\n\nUnterteilung des Datensatzes in Teildatensätze entsprechend der Tageszeit \n\n\n::: {.cell}\n\n```{.r .cell-code}\nDF_mod_night <- DF_mod |>\n  filter(time_of_day == \"night\")\n\nDF_mod_day <- DF_mod |>\n  filter(time_of_day == \"day\")\n\n# Kontrolle\ntable(DF_mod_night$time_of_day)\n## \n## night \n##  3964\n\ntable(DF_mod_day$time_of_day)\n## \n##  day \n## 3964\n```\n:::\n\n\n## Aufgabe 3\n\nErstellen von Density Plots der Präsenz / Absenz in Abhängigkeit der unabhängigen Variablen. Diese Übung dient einer ersten groben Einschätzung der Wirkung der Umweltvariablen auf die abhängige Variable (Präsenz/Absenz in unserem Fall)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# Ein Satz Density Plots für den Tagesdatensatz und einer für den Nachtdatensatz\n\npar(mfrow = c(3, 3), mar = c(4, 4, 3, 3)) # Vorbereitung Raster für Plots\n\n# innerhalb des for()-loops die Nummern der gewünschten Spalten einstellen\n\nfor (i in 5:12) {\n  dp <- DF_mod_day |> filter(pres_abs == 1) |> pull(i)\n  dp <- density(dp)\n  da <- DF_mod_day |> filter(pres_abs == 0) |> pull(i)\n  da <- density(da)\n  plot(0, 0, type = \"l\",\n    xlim = range(c(dp$x, da$x)),\n    ylim = range(dp$y, da$y),\n    xlab = names(DF_mod_day[i]),\n    ylab = \"Density\"\n  )\n  lines(dp$x, dp$y, col = \"blue\")             # Präsenz = used\n  lines(da$x, da$y, col = \"red\")              # Absenz = available\n}\n```\n\n::: {.cell-output-display}\n![](4_Multivariate_Modelle_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Aufgabe 4\n\nTesten eurer erklärenden Variablen auf Normalverteilung (nur kontinuierliche)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# klassischer Weg mit shapiro-wilk (vergl. Stats-Skript der Theorielektionen)\n# mehrere Spalten, verschiedenene statistische Kenngrössen werden angezeigt. Normalverteilung: Wert ganz unten. p>0.05 = ja\n\nround(stat.desc(DF_mod_day[5:12], basic = F, norm = T),3)\n##                slope topo_pos dist_road_trails dist_road_only dist_sett\n## median        13.706    0.233           29.866         35.056   180.966\n## mean          15.356    0.733           42.619         47.657   211.911\n## SE.mean        0.163    0.093            0.668          0.690     2.359\n## CI.mean.0.95   0.319    0.183            1.309          1.353     4.624\n## var          105.214   34.574         1767.202       1888.047 22051.998\n## std.dev       10.257    5.880           42.038         43.452   148.499\n## coef.var       0.668    8.020            0.986          0.912     0.701\n## skewness       0.733    0.278            1.872          1.632     0.721\n## skew.2SE       9.425    3.578           24.071         20.976     9.269\n## kurtosis      -0.092    0.748            4.033          2.994    -0.174\n## kurt.2SE      -0.594    4.807           25.933         19.254    -1.119\n## normtest.W     0.942    0.990            0.807          0.843     0.945\n## normtest.p     0.000    0.000            0.000          0.000     0.000\n##              forest_prop us_2014 os_2014\n## median             0.655   0.059   0.785\n## mean               0.598   0.119   0.594\n## SE.mean            0.005   0.002   0.007\n## CI.mean.0.95       0.010   0.005   0.013\n## var                0.110   0.023   0.175\n## std.dev            0.332   0.150   0.419\n## coef.var           0.555   1.258   0.705\n## skewness          -0.405   1.647  -0.425\n## skew.2SE          -5.202  21.181  -5.467\n## kurtosis          -1.116   2.924  -1.572\n## kurt.2SE          -7.174  18.800 -10.106\n## normtest.W         0.910   0.793   0.781\n## normtest.p         0.000   0.000   0.000\n\n# empfohlener Weg\n\nggplot(DF_mod_day, aes(slope)) +\n  geom_histogram(aes(y = after_stat(density)), color = \"black\", fill = \"white\") +\n  stat_function(fun = dnorm, args = list(mean = mean(DF_mod_day$slope, na.rm = T), sd = sd(DF_mod_day$slope, na.rm = T)), color = \"black\", linewidth = 1)\n```\n\n::: {.cell-output-display}\n![](4_Multivariate_Modelle_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Aufgabe 4: die Verteilung bei einem Teildatensatz zu testen reicht,\n# denn die verwendeten Kreise sind die selben am Tag und in der Nacht,\n# nur die Nutzung durch das Reh nicht\n```\n:::\n\n\n## Aufgabe 5\n\nExplorative Analysen der Variablen mit Scatterplots / Scatterplotmatrizen \n\n1) Zu Scatterplots und Scatterplotmatrizen gibt es viele verschiedene Funktionen / Packages, schaut im Internet und sucht euch eines welches euch passt.\n2) Testen der Korrelation zwischen den Variablen (Parametrisch oder nicht-parametrische Methode? Ausserdem: gewisse Scatterplotmatrizen zeigen euch die Koeffizenten direkt an)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npairs.panels(DF_mod_day[5:12],\n  method = \"pearson\", # correlation method\n  hist.col = \"#00AFBB\",\n  density = TRUE, # show density plots\n  ellipses = TRUE # show correlation ellipses\n)\n```\n\n::: {.cell-output-display}\n![](4_Multivariate_Modelle_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n\n```{.r .cell-code}\n\n# Aufgabe 5: die Korrelation bei einem Teildatensatz zu testen reicht,\n# denn die verwendeten Kreise sind die selben am Tag und in der Nacht,\n# nur die Nutzung durch das Reh nicht.\n```\n:::\n",
    "supporting": [
      "4_Multivariate_Modelle_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}