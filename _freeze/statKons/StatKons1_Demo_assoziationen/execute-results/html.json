{
  "hash": "a3392cef9a7cc87d16b7dfa548957e90",
  "result": {
    "markdown": "---\ndate: 2023-11-13\nlesson: StatKons1\nthema: Statistik Grundlagen\nindex: 1\nformat:\n  html:\n    code-tools:\n      source: true\n---\n\n\n# StatKons1: Demo\n\n- Download dieses Demoscript via \"\\</\\>Code\" (oben rechts)\n\n## Grundlagen\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# lade Daten\n# mehr Info darüber: https://cran.r-project.org/web/packages/explore/vignettes/explore_mtcars.html\ncars <- mtcars\n\n# neue kategoriale variable\ncars <-\n  as_tibble(cars) |> # da \"nur\" data frame kann glimplse nichts damit anfangen\n  mutate(vs_cat = if_else(vs == 0, \"normal\", \"v-type\")) |>\n  mutate(am_cat = if_else(am == 0, \"automatic\", \"manual\"))\n\n# betrachte die Daten\nsummary(cars)\n##       mpg             cyl             disp             hp       \n##  Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  \n##  1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  \n##  Median :19.20   Median :6.000   Median :196.3   Median :123.0  \n##  Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  \n##  3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  \n##  Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  \n##       drat             wt             qsec             vs        \n##  Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  \n##  1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  \n##  Median :3.695   Median :3.325   Median :17.71   Median :0.0000  \n##  Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  \n##  3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  \n##  Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  \n##        am              gear            carb          vs_cat         \n##  Min.   :0.0000   Min.   :3.000   Min.   :1.000   Length:32         \n##  1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000   Class :character  \n##  Median :0.0000   Median :4.000   Median :2.000   Mode  :character  \n##  Mean   :0.4062   Mean   :3.688   Mean   :2.812                     \n##  3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000                     \n##  Max.   :1.0000   Max.   :5.000   Max.   :8.000                     \n##     am_cat         \n##  Length:32         \n##  Class :character  \n##  Mode  :character  \n##                    \n##                    \n## \nglimpse(cars)\n## Rows: 32\n## Columns: 13\n## $ mpg    <dbl> 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.…\n## $ cyl    <dbl> 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, …\n## $ disp   <dbl> 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, …\n## $ hp     <dbl> 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 1…\n## $ drat   <dbl> 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.9…\n## $ wt     <dbl> 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, …\n## $ qsec   <dbl> 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90, …\n## $ vs     <dbl> 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, …\n## $ am     <dbl> 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, …\n## $ gear   <dbl> 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, …\n## $ carb   <dbl> 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, …\n## $ vs_cat <chr> \"normal\", \"normal\", \"v-type\", \"v-type\", \"normal\", \"v-type\", \"no…\n## $ am_cat <chr> \"manual\", \"manual\", \"manual\", \"automatic\", \"automatic\", \"automa…\n\n# Assoziation zwischen Anzahl Zylinder und Motorentyp ()\ntable(cars$vs_cat, cars$am_cat) # Achtung: sieht aus, als gäbe es weniger V-Motoren bei den handgeschalteten Autos\n##         \n##          automatic manual\n##   normal        12      6\n##   v-type         7      7\n\n# lass und das überprüfen\n# achtung: bei chi-square test kommt es sehr auf das format drauf an (er erwartet entweder vektoren oder eine matrix!)\n\n# exkurs um in es in ein matrix form zu bringen\nchi_sq_matrix <- xtabs(~ vs_cat + am_cat, data = as.data.frame(cars)) # in diesem Spezialfall haben wir keine Kriteriumsvariable\n\n# 1.version\nchi_sq <- chisq.test(chi_sq_matrix)\n\n# 2. version\nchi_sq <- chisq.test(cars$am_cat, cars$vs_cat)\n\n# resp. fisher exacter test verwenden, da 2x2 table\nfisher.test(chi_sq_matrix)\n## \n## \tFisher's Exact Test for Count Data\n## \n## data:  chi_sq_matrix\n## p-value = 0.4727\n## alternative hypothesis: true odds ratio is not equal to 1\n## 95 percent confidence interval:\n##   0.3825342 10.5916087\n## sample estimates:\n## odds ratio \n##   1.956055\n\n# fisher exakter test\nfisher.test(cars$am_cat, cars$vs_cat)\n## \n## \tFisher's Exact Test for Count Data\n## \n## data:  cars$am_cat and cars$vs_cat\n## p-value = 0.4727\n## alternative hypothesis: true odds ratio is not equal to 1\n## 95 percent confidence interval:\n##   0.3825342 10.5916087\n## sample estimates:\n## odds ratio \n##   1.956055\n\n# visualisieren: kudos goes to https://mgimond.github.io/Stats-in-R/ChiSquare_test.html#3_two_factor_classification\nOP <- par(mfrow = c(1, 2), \"mar\" = c(1, 1, 3, 1))\nmosaicplot(chi_sq$observed, cex.axis = 1, main = \"Observed counts\")\nmosaicplot(chi_sq$expected, cex.axis = 1, main = \"Expected counts\\n(if class had no influence)\")\n```\n\n::: {.cell-output-display}\n![](StatKons1_Demo_assoziationen_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\npar(OP)\n```\n:::\n\n\n## Möglicher Text für Ergebnisse\n\nDer $\\chi^2$-Test sagt uns, dass das Art des Motors und Art des Fahrwerks statistisch nicht zusammenhängen. Es gibt keine signifikante Unterscheide zwischen den Variablen \"VS\" und \"AM - Transmission\" (*p* = .555). Der Fisher exacter Test bestätigt diesen Befund.\nDie Odds Ratio (OR) sagt uns hingegen - unter der Prämisse, dass \"normale\" Motoren eher mit automatischen und V-Motoren eher mit handgeschalteten Fahrwerken ausgestattet sind - dass die Chance doppelt so hoch ist, dass ein Auto mit \"normalem\" Motor automatisch geschaltet ist, als dies bei einem Auto mit V-Motor der Fall wäre\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# define dataset\ncars <- mtcars\n\n# neue kategoriale variable\ncars <-\n  as_tibble(cars) |> # da \"nur\" data frame kann glimplse nichts damit anfangen\n  mutate(vs_cat = if_else(vs == 0, \"normal\", \"v-type\")) |>\n  mutate(am_cat = if_else(am == 0, \"automatic\", \"manual\"))\n\n# bei t-Test immer zuerst visualisieren: in diesem Fall Boxplot mit Variablen Getriebe (v- vs. s-motor) und Anzahl Pferdestärke\nggplot2::ggplot(cars, aes(y = hp, x = vs_cat)) +\n  stat_boxplot(geom = \"errorbar\", width = .25) +\n  geom_boxplot() +\n  # geom_violin()+\n  labs(x = \"\\nBauform Motor\", y = \"Pferdestärke (PS)\\n\") +\n  mytheme\n```\n\n::: {.cell-output-display}\n![](StatKons1_Demo_assoziationen_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n\n# alternativ\nboxplot(cars$hp ~ cars$vs_cat) # sieht ganz ok aus, jedoch weist die variable \"normale Motoren\" deutlich eine grössere Streuung aus -> siehe aov.1 und deren Modelgüte-Plots\n```\n\n::: {.cell-output-display}\n![](StatKons1_Demo_assoziationen_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\n\n# Definiere Model: t-Test, wobei die AV metrisch (in unserem Fall eine Zählvariable) sein muss\nttest <- t.test(cars$hp ~ cars$vs_cat)\naov.1 <- aov(cars$hp ~ cars$vs_cat)\n\n# schaue Modellgüte an\npar(mfrow = c(2, 2))\nplot(aov.1)\n```\n\n::: {.cell-output-display}\n![](StatKons1_Demo_assoziationen_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n```{.r .cell-code}\n\n# zeige resultate\nttest\n## \n## \tWelch Two Sample t-test\n## \n## data:  cars$hp by cars$vs_cat\n## t = 6.2908, df = 23.561, p-value = 1.82e-06\n## alternative hypothesis: true difference in means between group normal and group v-type is not equal to 0\n## 95 percent confidence interval:\n##   66.06161 130.66854\n## sample estimates:\n## mean in group normal mean in group v-type \n##            189.72222             91.35714\nsummary.lm(aov.1)\n## \n## Call:\n## aov(formula = cars$hp ~ cars$vs_cat)\n## \n## Residuals:\n##    Min     1Q Median     3Q    Max \n## -98.72 -25.61  -4.04  22.55 145.28 \n## \n## Coefficients:\n##                   Estimate Std. Error t value Pr(>|t|)    \n## (Intercept)         189.72      11.35  16.720  < 2e-16 ***\n## cars$vs_catv-type   -98.37      17.16  -5.734 2.94e-06 ***\n## ---\n## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n## \n## Residual standard error: 48.14 on 30 degrees of freedom\n## Multiple R-squared:  0.5229,\tAdjusted R-squared:  0.507 \n## F-statistic: 32.88 on 1 and 30 DF,  p-value: 2.941e-06\n\n# wie würdet ihr nun die Ergebnisse darstellen?\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# für mehr infos here: https://cran.r-project.org/web/packages/datasauRus/vignettes/Datasaurus.html\n\nlibrary(\"datasauRus\")\n\nif(requireNamespace(\"dplyr\")){\n  suppressPackageStartupMessages(library(\"dplyr\"))\n  dt <- datasaurus_dozen |> \n    group_by(dataset) |> \n    summarize(\n      mean_x    = mean(x),\n      mean_y    = mean(y),\n      std_dev_x = sd(x),\n      std_dev_y = sd(y),\n      corr_x_y  = cor(x, y)\n    )\n}\n\n# check data structure\nglimpse(dt)\n## Rows: 13\n## Columns: 6\n## $ dataset   <chr> \"away\", \"bullseye\", \"circle\", \"dino\", \"dots\", \"h_lines\", \"hi…\n## $ mean_x    <dbl> 54.26610, 54.26873, 54.26732, 54.26327, 54.26030, 54.26144, …\n## $ mean_y    <dbl> 47.83472, 47.83082, 47.83772, 47.83225, 47.83983, 47.83025, …\n## $ std_dev_x <dbl> 16.76982, 16.76924, 16.76001, 16.76514, 16.76774, 16.76590, …\n## $ std_dev_y <dbl> 26.93974, 26.93573, 26.93004, 26.93540, 26.93019, 26.93988, …\n## $ corr_x_y  <dbl> -0.06412835, -0.06858639, -0.06834336, -0.06447185, -0.06034…\n\n# plot two examples  \nif(requireNamespace(\"ggplot2\")){\n  library(\"ggplot2\")\n  \n  dt = filter(datasaurus_dozen, dataset == \"dino\" | dataset == \"slant_up\")\n  \n  ggplot(dt, aes(x=x, y=y, colour=dataset))+\n    geom_point()+\n    theme_bw() +\n    theme(legend.position = \"none\") +\n    facet_wrap(~dataset) +\n    geom_smooth(method = \"lm\", se = FALSE)\n}\n```\n\n::: {.cell-output-display}\n![](StatKons1_Demo_assoziationen_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "StatKons1_Demo_assoziationen_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}